---
categories: ["blah"]
title: "会社で出た ActiveRecord の Nested transactions のクイズが解けなかた"
author: cat2koban
date: 2022-01-26
tags: ["diary", "rails"]
aliases:
- /2022-01-26.html
---

### どの

ユーザーが作られる？っていう問題。会社で出たんだけど、解けなくて死んだ。

```ruby
User.transaction do
  User.create(username: 'Kotori')
  User.transaction do
    User.create(username: 'Nemu')
    raise ActiveRecord::Rollback
  end
end
```

<br />

Q. どのユーザーが作られる？

1. `kotori`
2. `kotori` と `Nemu`
3. どちらも作られない

答えはこちら ▼
https://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html
